{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Premium Auto Sales - Vintage & Luxury Cars{% endblock %}

{% block content %}

<!-- Hero Section with Video -->
<section class="hero-section" id="home">
    <video class="hero-video" autoplay muted loop playsinline>
        <source src="{{ banner.video.url }}" type="video/mp4">
    </video>
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <p class="hero-label" data-aos="fade-down">Premium Vintage Collection</p>
        <h1 class="hero-title" data-aos="fade-up" data-aos-delay="100">TIMELESS ELEGANCE,<br>UNMATCHED POWER</h1>
        <p class="hero-subtitle" data-aos="fade-up" data-aos-delay="200">
            Explore our curated collection of timeless automobiles from decades past.<br>
            From iconic muscle cars to meticulously restored classics.
        </p>
        <div data-aos="fade-up" data-aos-delay="300">
            <a href="#inventory" class="btn btn-gold me-3">
                Explore Inventory
            </a>
            <a href="#contact" class="btn btn-outline-light">
                Visit Showroom
            </a>
        </div>
    </div>
</section>

<!-- Inventory Section -->
<section id="inventory" class="section-padding bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <p class="section-label" data-aos="fade-up">Our Collection</p>
            <h2 class="section-title" data-aos="fade-up" data-aos-delay="100">Featured Inventory</h2>
            <div class="title-line" data-aos="fade-up" data-aos-delay="200"></div>
        </div>

        <!-- Filter Section -->
        <div class="card border-0 shadow-sm mb-5" data-aos="fade-up">
            <div class="card-body p-4">
                <form method="GET" action="{% url 'car:home' %}" id="filterForm">
                    <div class="row g-3 align-items-end">
                        <div class="col-lg-3 col-md-6">
                            <label class="form-label fw-semibold">Make</label>
                            <select name="make" class="form-select">
                                <option value="all">All Makes</option>
                                {% for make in makes %}
                                <option value="{{ make }}" {% if current_make == make %}selected{% endif %}>{{ make }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <label class="form-label fw-semibold">Year Range</label>
                            <select name="year" class="form-select">
                                <option value="all">All Years</option>
                                {% for year_range in year_ranges %}
                                <option value="{{ year_range.range }}" {% if current_year == year_range.range %}selected{% endif %}>
                                    {{ year_range.range }} ({{ year_range.count }})
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-6">
                            <label class="form-label fw-semibold">Min Price</label>
                            <input type="number" name="min_price" class="form-control" placeholder="$0" value="{{ current_min_price }}">
                        </div>
                        <div class="col-lg-2 col-md-6">
                            <label class="form-label fw-semibold">Max Price</label>
                            <input type="number" name="max_price" class="form-control" placeholder="$100,000" value="{{ current_max_price }}">
                        </div>
                        <div class="col-lg-2 col-md-12">
                            <button type="submit" class="btn btn-dark w-100">
                                <i class="bi bi-funnel me-2"></i>Filter
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Cars Grid -->
        <div class="row g-4">
            {% for car in cars %}
            <div class="col-lg-4 col-md-6" data-aos="{% cycle 'fade-right' 'fade-up' 'fade-left' %}" data-aos-delay="{{ forloop.counter0|add:'1' }}00">
                <div class="car-card">
                    <a href="{% url 'car:car_detail' car.id %}">
                        <div class="car-image-wrapper">
                            {% if car.images.first %}
                                <img src="{{ car.images.first.image.url }}" alt="{{ car.title }}">
                            {% else %}
                                <img src="{% static 'images/no-image.jpg' %}" alt="No image">
                            {% endif %}
                            <div class="car-overlay">
                            </div>
                        </div>
                    </a>
                    <div class="car-info">
                        <h3 class="car-title">{{ car.title }}</h3>
                        <p class="car-type">{{ car.body_type }}</p>
                        <div class="car-price">${{ car.price|intcomma }}</div>
                        <div class="car-specs">
                            <span><i class="bi bi-speedometer2"></i> {{ car.mileage|default:"N/A" }} mi</span>
                            <span><i class="bi bi-fuel-pump"></i> {{ car.fuel_type|title }}</span>
                            <span><i class="bi bi-calendar-event"></i> {{ car.year }}</span>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12">
                <div class="alert alert-info text-center">
                    <i class="bi bi-info-circle me-2"></i>No vehicles found matching your criteria.
                </div>
            </div>
            {% endfor %}
        </div>

        {% if cars %}
        <div class="text-center mt-5" data-aos="fade-up">
            <a href="{% url 'car:home' %}" class="btn btn-gold btn-lg">
                View All Inventory <span class="ms-2">({{ cars.count|add:'15' }} more)</span>
            </a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Features Section -->
<section class="section-padding bg-dark text-white">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-3 col-md-6" data-aos="fade-right" data-aos-delay="100">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="bi bi-gem"></i>
                    </div>
                    <h3 class="feature-title">Classic Selection</h3>
                    <p class="feature-desc">Carefully curated classic vehicles from the world's most prestigious manufacturers, each meeting our highest standards.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h3 class="feature-title">Quality Guaranteed</h3>
                    <p class="feature-desc">Every vehicle undergoes comprehensive inspection and comes with our exclusive warranty and certified guarantee.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="bi bi-cash-stack"></i>
                    </div>
                    <h3 class="feature-title">Flexible Financing</h3>
                    <p class="feature-desc">Competitive rates and personalized financing solutions designed to make classic accessible with terms that fit.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6" data-aos="fade-left" data-aos-delay="400">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="bi bi-truck"></i>
                    </div>
                    <h3 class="feature-title">White Glove Service</h3>
                    <p class="feature-desc">Complimentary USA delivery with white-glove service, ensuring your classic vehicle arrives in pristine condition.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About Section -->
<section id="about" class="section-padding bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="about-images">
                    <img src="{{site.banner.url}}" alt="Showroom" class="img-fluid rounded shadow-lg mb-3" data-aos="fade-right">
                    <div class="row g-3">
                        <div class="col-6">
                            <img src="{{site.banner.url}}" alt="Classic Cars" class="img-fluid rounded shadow" data-aos="fade-right" data-aos-delay="100">
                        </div>
                        <div class="col-6">
                            <img src="{{site.banner.url}}" alt="Luxury Interior" class="img-fluid rounded shadow" data-aos="fade-right" data-aos-delay="200">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left">
                <p class="section-label">About Us</p>
                <h2 class="section-title">Preserving Automotive Heritage & Excellence</h2>
                <div class="title-line mb-4" style="margin-left: 0;"></div>
                <p class="lead mb-4">
                    J&E Auto Sales is your premier destination for the world's most exclusive and luxurious vehicles. 
                    With years of experience in the classic automotive industry, we pride ourselves on exceptional 
                    service and unparalleled quality.
                </p>
                <p class="mb-4">
                    Our carefully curated inventory features only the finest vehicles from prestigious manufacturers 
                    like Mercedes-Benz, BMW, Audi, Rolls-Royce, and more. Each vehicle undergoes rigorous inspection 
                    to ensure it meets our highest standards.
                </p>
                <div class="row g-4 mb-4">
                    <div class="col-6">
                        <div class="stat-card text-center">
                            <h3 class="stat-number text-gold">25+</h3>
                            <p class="stat-label mb-0">Years Experience</p>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="stat-card text-center">
                            <h3 class="stat-number text-gold">500+</h3>
                            <p class="stat-label mb-0">Vehicles Sold</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="section-padding bg-white">
    <div class="container">
        <div class="text-center mb-5">
            <p class="section-label" data-aos="fade-up">Get in Touch</p>
            <h2 class="section-title" data-aos="fade-up" data-aos-delay="100">Contact Our Specialists</h2>
            <div class="title-line" data-aos="fade-up" data-aos-delay="200"></div>
            <p class="lead" data-aos="fade-up" data-aos-delay="300">Ready to experience classic? Our team is here to help you find your perfect vehicle.</p>
        </div>

        <div class="row g-4 mb-5">
            <div class="col-lg-4" data-aos="fade-right" data-aos-delay="100">
                <div class="contact-card text-center">
                    <div class="contact-icon">
                        <i class="bi bi-geo-alt"></i>
                    </div>
                    <h4 class="contact-title">Visit Our Showroom</h4>
                    <p class="contact-text">{{site.location|linebreaksbr}}</p>
                </div>
            </div>
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
                <div class="contact-card text-center">
                    <div class="contact-icon">
                        <i class="bi bi-envelope"></i>
                    </div>
                    <h4 class="contact-title">Email Us</h4>
                    <p class="contact-text">{{site.email}}<br><br>{{site.opening_hours}}</p>
                </div>
            </div>
            <div class="col-lg-4" data-aos="fade-left" data-aos-delay="300">
                <div class="contact-card text-center">
                    <div class="contact-icon">
                        <i class="bi bi-telephone"></i>
                    </div>
                    <h4 class="contact-title">Call Us</h4>
                    <p class="contact-text">{{site.phone}}<br><br>Available 24/7</p>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8 mx-auto" data-aos="fade-up" data-aos-delay="400">
                <div class="contact-form-wrapper">
                    <h3 class="text-center mb-4">Send us a Message</h3>
                    <form method="POST" action="{% url 'car:contact' %}">
                        {% csrf_token %}
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name *</label>
                                <input type="text" name="name" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email Address *</label>
                                <input type="email" name="email" class="form-control" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" name="phone" class="form-control">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Message *</label>
                                <textarea name="message" class="form-control" rows="5" required></textarea>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-gold w-100">
                                    <i class="bi bi-send me-2"></i>Send Message
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const offsetTop = target.offsetTop - 80;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });
</script>
{% endblock %}